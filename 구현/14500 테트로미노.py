# https://www.acmicpc.net/problem/14500

tet = [[[0,0],[0,1],[0,2],[0,3]],
[[0,0],[1,0],[2,0],[3,0]],
[[0,0],[1,0],[0,1],[1,1]],
[[0,0],[1,0],[2,0],[2,1]],
[[0,0],[0,1],[0,2],[-1,2]],
[[0,0],[0,1],[1,1],[2,1]],
[[0,0],[1,0],[0,1],[0,2]],
[[0,0],[1,0],[2,0],[2,-1]],
[[0,0],[1,0],[2,0],[0,1]],
[[0,0],[1,0],[1,1],[1,2]],
[[0,0],[0,1],[0,2],[1,2]],
[[0,0],[1,0],[1,1],[2,1]],
[[0,0],[0,1],[-1,1],[-1,2]],
[[0,0],[1,0],[1,-1],[2,-1]],
[[0,0],[0,1],[1,1],[1,2]],
[[0,0],[0,1],[0,2],[1,1]],
[[0,0],[0,1],[0,2],[-1,1]],
[[0,0],[1,0],[2,0],[1,1]],
[[0,0],[1,0],[2,0],[1,-1]]]

def check(x,y):
    mx = 0
    for tetris in tet:
        b = 0
        for point in tetris:
            nx = x+point[0]
            ny = y+point[1]
            if 0<=nx<n and 0<=ny<m:
                b += graph[nx][ny]

        mx = max(mx,b)
    return mx

n,m = map(int,input().split())
graph= []
for i in range(n):
    tmp = list(map(int,input().split()))
    graph.append(tmp)

mx_b =0
for i in range(n):
    for j in range(m):
        mx_b = max(mx_b,check(i,j))
print(mx_b)

